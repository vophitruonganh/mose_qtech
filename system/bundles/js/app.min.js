"use strict";var module={},mose={};!function(a){var b=function(){};b.prototype.initTagsInputPlugin=function(){a('[data-plugin="tagsinput"]')[0]&&a('[data-plugin="tagsinput"]').each(function(){a(this).tagsinput({maxChars:50})})},b.prototype.initBootstrapDropdownPlugin=function(){a(".dropdown-select")[0]&&a(".dropdown-select").each(function(){var b=a(this).attr("data-slug"),c=a(this).attr("data-name"),d=a(this).attr("data-type")||"multiple";return"undefined"!=typeof b&&(a(this).on("click",".dropdown-item",function(e){e.stopPropagation();var f=a(this).attr("data-id")||0;"single"==d?(a(this).parents(".dropdown-menu").find(".dropdown-item").not(a(this)).parent().removeClass("selected"),a(this).parent().toggleClass("selected")):a(this).parent().toggleClass("selected"),a(this).parent().hasClass("selected")?"single"==d?(a(this).parents(".dropdown").find("input."+b).remove(),a(this).parents(".dropdown").append('<input class="'+b+" "+b+"-"+f+'" type="hidden" name="'+c+'[]" value="'+f+'" />')):a(this).parents(".dropdown").append('<input class="'+b+" "+b+"-"+f+'" type="hidden" name="'+c+'[]" value="'+f+'" />'):a(this).parents(".dropdown").find("."+b+"-"+f).remove();var g=a(this).parents(".dropdown").find("input."+b).length;"single"==d?g>0?a(this).parents(".dropdown").find(".dropdown-toggle .text").text(a(this).find("span").text()||""):a(this).parents(".dropdown").find(".dropdown-toggle .text").text(a(this).parents(".dropdown").find(".dropdown-toggle .text").attr("data-title")+" "):(a(this).parents(".dropdown").find(".count-selected").show(),g>0?a(this).parents(".dropdown").find(".count-selected").text("("+g+")"):a(this).parents(".dropdown").find(".count-selected").text("(0)"))}),a(this).on("click",".dropdown-menu",function(b){a(b.target).closest(".dropdown-toggle").length?a(this).data("closable",!0):a(this).data("closable",!1)}),void a(this).on("hide.bs.dropdown",function(b){var c=a(this).data("closable");return a(this).data("closable",!0),c}))})},b.prototype.initWavesPlugin=function(){a(".waves-effect")[0]&&(Waves.attach(".waves-effect"),Waves.attach(".waves-circle, .waves-float",["waves-circle","waves-float"]),Waves.init())},b.prototype.initAlertDismissingPlugin=function(){a('[data-plugin="alerts"]')[0]&&a('[data-plugin="alerts"]').each(function(){a(this).alert()})},b.prototype.initSelect2Plugin=function(){a('[data-plugin="select2"]')[0]&&a('[data-plugin="select2"]').each(function(){var b={};"false"==a(this).attr("data-select2-search")&&(b={minimumResultsForSearch:-1}),a(this).select2(b)})},b.prototype.initAutosizelugin=function(){a('[data-plugin="autosize"]')[0]&&a('[data-plugin="autosize"]').each(function(){autosize(a(this))})},b.prototype.initjScrollPanePlugin=function(){a('[data-plugin="jScrollPane"]')[0]&&a('[data-plugin="jScrollPane"]').each(function(b,c){var d={};a(this).attr("style","");var e=a(this).attr("data-resize"),f=a(this).attr("data-type");"true"==e&&(d.autoReinitialise=!0,d.autoReinitialiseDelay=100),"menu-left"==f&&a(this).find("li.with-sub")&&a(this).find("li.with-sub").each(function(){var b=a(this),c=b.find(">a"),d=b.find("ul");c.click(function(){b.hasClass("opened")?(b.removeClass("opened"),d.slideUp(350)):(a(this).find("li.with-sub").not(this).removeClass("opened").find("ul").slideUp(350),b.addClass("opened"),d.slideDown(350))})}),a(this).jScrollPane(d)})},b.prototype.initDateTimepickerPlugin=function(){a('[data-plugin="datetimepicker"]')[0]&&a('[data-plugin="datetimepicker"]').datetimepicker({showTodayButton:!0,icons:{time:"fa fa-clock-o",date:"fa fa-calendar",up:"fa fa-chevron-up",down:"fa fa-chevron-down",previous:"fa fa-long-arrow-left",next:"fa fa-long-arrow-right",today:"fa fa-bullseye",clear:"fa fa-trash",close:"fa fa-remove"},showClose:!0,showClear:!0,format:"H:m DD/MM/YYYY",showClose:!0})},b.prototype.initClipboardPlugin=function(){a('[data-plugin="clipboard"]')[0]&&a('[data-plugin="clipboard"]').each(function(a,b){new Clipboard(this)})},b.prototype.initMorrisPlugin=function(){a('[data-plugin="morris"]')[0]&&a('[data-plugin="morris"]').each(function(b,c){var d=a(this).attr("id");new Morris.Line({element:d,data:[{year:"2008",value:20},{year:"2009",value:10},{year:"2010",value:5},{year:"2011",value:5},{year:"2012",value:20}],xkey:"year",ykeys:["value"],labels:["Value"]})})},b.prototype.initTooltipPlugin=function(){a.fn.tooltip&&a('[data-toggle="tooltip"]').tooltip()},b.prototype.initCurrencySymbolsPlugin=function(){a(".currency-symbols")[0]&&a(".currency-symbols").each(function(){var b=a(this).attr("data-type");"undefined"!=typeof b&&("VND"==b?a(this).html("&#8363;"):a(this).html("$"))})},b.prototype.initSortablePlugin=function(){a('[data-plugin="sortable"]')[0]&&a('[data-plugin="sortable"]').each(function(){a(this).sortable({placeholder:"sortable-placeholder",start:function(a,b){b.placeholder.height(b.item.height())}})})},b.prototype.initTinymcePlugin=function(){document.querySelector('[data-plugin="tinymce"]')&&tinymce.init({selector:'[data-plugin="tinymce"]',height:300,skin:"mose",plugins:["advlist autolink lists link image charmap print preview hr anchor pagebreak","searchreplace wordcount visualblocks visualchars code fullscreen","insertdatetime media nonbreaking save table contextmenu directionality","emoticons template paste textcolor colorpicker textpattern imagetools"],toolbar1:"insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image",toolbar2:"print preview media | forecolor backcolor emoticons",image_advtab:!0,templates:[{title:"Test template 1",content:"Test 1"},{title:"Test template 2",content:"Test 2"}],setup:function(a){a.on("change",function(){a.save()})}})},b.prototype.initMaterialPlugin=function(){document.querySelector(".fg-line")&&(a("body").on("focus",".fg-line .form-control",function(){a(this).closest(".fg-line").addClass("fg-toggled")}),a("body").on("blur",".form-control",function(){var b=a(this).closest(".form-group, .input-group"),c=b.find(".form-control").val();b.hasClass("fg-float")?0==c.length&&a(this).closest(".fg-line").removeClass("fg-toggled"):a(this).closest(".fg-line").removeClass("fg-toggled")})),document.querySelector(".fg-float")&&a(".fg-float .form-control").each(function(){var b=a(this).val();0==!b.length&&a(this).closest(".fg-line").addClass("fg-toggled")})},b.prototype.initPopoverPlugin=function(){a.fn.popover&&a('[data-toggle="popover"]').popover()},b.prototype.initCustomModalPlugin=function(){a('[data-plugin="custommodal"]').on("click",function(b){Custombox.open({target:a(this).attr("href"),effect:a(this).attr("data-animation"),overlaySpeed:a(this).attr("data-overlaySpeed"),overlayColor:a(this).attr("data-overlayColor")}),b.preventDefault()})},b.prototype.initNiceScrollPlugin=function(){a.fn.niceScroll&&a(".nicescroll").niceScroll({cursorcolor:"#98a6ad",cursorwidth:"6px",cursorborderradius:"5px"})},b.prototype.initRangeSlider=function(){a.fn.slider&&a('[data-plugin="range-slider"]').slider({})},b.prototype.initSwitchery=function(){a('[data-plugin="switchery"]').each(function(b,c){new Switchery(a(this)[0],a(this).data())})},b.prototype.initMultiSelect=function(){a('[data-plugin="multiselect"]').length>0&&a('[data-plugin="multiselect"]').multiSelect(a(this).data())},b.prototype.initPeityCharts=function(){a('[data-plugin="peity-pie"]').each(function(b,c){var d=a(this).attr("data-colors")?a(this).attr("data-colors").split(","):[],e=a(this).attr("data-width")?a(this).attr("data-width"):20,f=a(this).attr("data-height")?a(this).attr("data-height"):20;a(this).peity("pie",{fill:d,width:e,height:f})}),a('[data-plugin="peity-donut"]').each(function(b,c){var d=a(this).attr("data-colors")?a(this).attr("data-colors").split(","):[],e=a(this).attr("data-width")?a(this).attr("data-width"):20,f=a(this).attr("data-height")?a(this).attr("data-height"):20;a(this).peity("donut",{fill:d,width:e,height:f})}),a('[data-plugin="peity-donut-alt"]').each(function(b,c){a(this).peity("donut")}),a('[data-plugin="peity-line"]').each(function(b,c){a(this).peity("line",a(this).data())}),a('[data-plugin="peity-bar"]').each(function(b,c){var d=a(this).attr("data-colors")?a(this).attr("data-colors").split(","):[],e=a(this).attr("data-width")?a(this).attr("data-width"):20,f=a(this).attr("data-height")?a(this).attr("data-height"):20;a(this).peity("bar",{fill:d,width:e,height:f})})},b.prototype.initKnob=function(){a('[data-plugin="knob"]').each(function(b,c){a(this).knob()})},b.prototype.initTagsinput=function(){a('[data-plugin="tagsinput"]').each(function(b,c){a(this).tagsinput({maxChars:50})})},b.prototype.initCircliful=function(){a('[data-plugin="circliful"]').each(function(b,c){a(this).circliful()})},b.prototype.initCounterUp=function(){a(this).attr("data-delay")?a(this).attr("data-delay"):100,a(this).attr("data-time")?a(this).attr("data-time"):1200;a('[data-plugin="counterup"]').each(function(b,c){a(this).counterUp({delay:100,time:1200})})},b.prototype.init=function(){this.initTagsInputPlugin(),this.initBootstrapDropdownPlugin(),this.initWavesPlugin(),this.initAlertDismissingPlugin(),this.initSelect2Plugin(),this.initAutosizelugin(),this.initjScrollPanePlugin(),this.initDateTimepickerPlugin(),this.initClipboardPlugin(),this.initSortablePlugin(),this.initTinymcePlugin(),this.initMaterialPlugin(),this.initTooltipPlugin(),this.initCurrencySymbolsPlugin(),this.initPopoverPlugin(),this.initNiceScrollPlugin(),this.initCustomModalPlugin(),this.initRangeSlider(),this.initSwitchery(),this.initMultiSelect(),this.initPeityCharts(),this.initKnob(),this.initTagsinput(),this.initCircliful(),this.initCounterUp()},a.Components=new b,a.Components.Constructor=b}(window.jQuery),function(a){a.Components.init()}(window.jQuery);var $validator={isString:function(a){return"undefined"!=typeof a&&void 0!=a&&null!=a&&""!=a},isObject:function(a){return void 0!==a&&null!==a&&""!==a&&"undefined"!=typeof a&&"object"==typeof a},isInt:function(a){return a%1===0},isJson:function(a){a="string"!=typeof a?JSON.stringify(a):a;try{a=JSON.parse(a)}catch(a){return!1}return"object"==typeof a&&null!==a},isResponse:function(a){return!("undefined"==typeof a||!$validator.isJson(a))}};!function(a,b){var c=function(a){var b=a.url.replace(/jQuery.*/,"");return a.cacheKey&&"function"==typeof a.cacheKey?a.cacheKey(a):(a.cache===!1&&(b=b.replace(/([?&])_=[^&]*/,"")),a.cacheKey||b+a.type+(a.data||""))},d=function(a){if(!a)return!1;if(a===!0)return b.localStorage;if("object"==typeof a&&"getItem"in a&&"removeItem"in a&&"setItem"in a)return a;throw new TypeError("localCache must either be a boolean value, or an object which implements the Storage interface.")},e=function(a,b){a.removeItem(b),a.removeItem(b+"cachettl"),a.removeItem(b+"dataType")};a.ajaxPrefilter(function(a){var b,f,g=d(a.localCache),h=a.cacheTTL||5,i=c(a),j=a.isCacheValid;g&&(b=g.getItem(i+"cachettl"),j&&"function"==typeof j&&!j()&&(e(g,i),b=0),b&&b<+new Date&&(e(g,i),b=0),f=g.getItem(i),f||(a.success&&(a.realsuccess=a.success),a.success=function(b,c,d){var f=b,j=this.dataType||d.getResponseHeader("Content-Type");-1!==j.toLowerCase().indexOf("json")&&(f=JSON.stringify(b));try{g.setItem(i,f),g.setItem(i+"cachettl",+new Date+6e4*h),g.setItem(i+"dataType",j)}catch(a){e(g,i),console.log("Cache Error:"+a,i,f)}a.realsuccess&&a.realsuccess(b,c,d)}))}),a.ajaxTransport("+*",function(a){if(a.localCache){var b=c(a),e=d(a.localCache),f=a.dataType||e.getItem(b+"dataType")||"text",g=!!e&&e.getItem(b);if(g)return-1!==f.toLowerCase().indexOf("json")&&(g=JSON.parse(g)),{send:function(a,b){var c={};c[f]=g,b(200,"success",c,"")},abort:function(){console.log("Aborted ajax transport for json cache.")}}}})}(jQuery,window);var ajax_sendding=!1,$http={run:function(a,b,c,d){if(0==$validator.isString(b)||0==$validator.isString(c))return!1;"GET"!==a&&(a="POST");var e="application/x-www-form-urlencoded; charset=UTF-8",f=!0;"UPLOAD"==a&&(a=" POST",e=!1,f=!1);var g=$.ajax({type:a,url:b,data:c,dataType:"text",contentType:e,processData:f,cache:!0,localCache:!1,cacheTTL:1,isCacheValid:function(){return!0},beforeSend:function(){d!==!1&&0===$("#pageload-bar").length&&($("body").append("<div id='pageload-bar'></div>"),$("#pageload-bar").addClass("waiting").append($("<dt/><dd/>")),$("#pageload-bar").width(50+30*Math.random()+"%"))},success:function(a){},complete:function(){},error:function(){}}).always(function(){ajax_sendding=!1,d!==!1&&$("#pageload-bar").width("101%").delay(200).fadeOut(400,function(){$(this).remove()})}).done(function(a){});return"undefined"!=typeof g&&(1==ajax_sendding&&g.abort(),ajax_sendding=!0,g)},upload:function(a,b,c){return $http.run("UPLOAD",a,b,c)},get:function(a,b,c){return $http.run("GET",a,b,c)},post:function(a,b,c){return $http.run("POST",a,b,c)}},$alerts={run:function(a,b,c,d,e){if($(".form-alerts")[0]){$(".form-alerts").empty();var f="",g="",h="";if(c=$validator.isString(c)!==!1?"<strong>"+c+"</strong> ":"","success"==a){if(f=" alert-success",0==$validator.isString(b))return!1}else"warning"==a?f=" alert-warning":"warning"==a?f=" alert-info":"error"==a&&(f=" alert-danger");if(1==d&&(h=" alert-dismissible fade in",g='<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>'),b=$php.urldecode(b),$validator.isJson(b)){b=$php.json_decode(b);var i=(b.length,"");for(var j in b){var k=b[j];for(var l in k)i+="<li>"+k[l]+"</li>"}$validator.isString(i)&&(b="<ul>"+i+"</ul>"),$(".form-alerts").prepend('<div class="alert'+f+h+'" role="alert" data-plugin="alerts">'+g+c+b+"</div>")}else $(".form-alerts").prepend('<div class="alert'+f+h+'" role="alert" data-plugin="alerts">'+g+c+b+"</div>");$validator.isString(e)!==!1&&setTimeout(function(){$(".form-alerts").empty()},5e3)}},success:function(a,b,c,d){$alerts.run("success",a,b,c,d)},warning:function(a,b,c,d){$alerts.run("warning",a,b,c,d)},error:function(a,b,c,d){0==$validator.isString(a)&&(a="Đã có lỗi trong quá trình xử lý."),$alerts.run("error",a,b,c,d)},warning:function(a,b,c,d){$alerts.run("warning",a,b,c,d)},info:function(a,b,c,d){$alerts.run("info",a,b,c,d)},response:function(data,message,callback){if($validator.isResponse(data)){var objdata=$.parseJSON(data);"True"==objdata.Response?(1==$validator.isString(objdata.Redirect)?window.location.href=objdata.Redirect:1==$validator.isString(objdata.Message)?$alerts.success(objdata.Message,"",!1,!0):1==$validator.isString(message)?$alerts.success(message,"",!1,!0):$(".form-alerts").empty(),1==$validator.isString(callback)&&0==$validator.isString(objdata.Redirect)&&"function"==typeof eval(callback)&&callback.call()):"False"==objdata.Response?1==$validator.isString(objdata.Redirect)?window.location.href=objdata.Redirect:1==$validator.isString(objdata.Message)?$alerts.error(objdata.Message,"",!0):1==$validator.isString(message)?$alerts.error(message,"",!0):$alerts.error("","",!0):$alerts.error("","",!0)}else $alerts.error("","",!0)}},$php={urlencode:function(a){return a+="",encodeURIComponent(a).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")},urldecode:function(a){return decodeURIComponent((a+"").replace(/%(?![\da-f]{2})/gi,function(){return"%25"}).replace(/\+/g,"%20"))},json_encode:function(a){var b="undefined"!=typeof window?window:GLOBAL;b.$locutus=b.$locutus||{};var c=b.$locutus;c.php=c.php||{};var d,e=b.JSON;try{if("object"==typeof e&&"function"==typeof e.stringify){if(d=e.stringify(a),void 0===d)throw new SyntaxError("json_encode");return d}var f=a,g=function(a){var b=["\0-","-","­","؀-؄","܏","឴","឵","‌-‏","\u2028- ","⁠-⁯","\ufeff","￰-￿"].join(""),c=new RegExp('[\\"'+b+"]","g"),d={"\b":"\\b"," ":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return c.lastIndex=0,c.test(a)?'"'+a.replace(c,function(a){var b=d[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'},h=function(a,b){var c="",d="    ",e=0,f="",i="",j=0,k=c,l=[],m=b[a];switch(m&&"object"==typeof m&&"function"==typeof m.toJSON&&(m=m.toJSON(a)),typeof m){case"string":return g(m);case"number":return isFinite(m)?String(m):"null";case"boolean":case"null":return String(m);case"object":if(!m)return"null";if(c+=d,l=[],"[object Array]"===Object.prototype.toString.apply(m)){for(j=m.length,e=0;j>e;e+=1)l[e]=h(e,m)||"null";return i=0===l.length?"[]":c?"[\n"+c+l.join(",\n"+c)+"\n"+k+"]":"["+l.join(",")+"]",c=k,i}for(f in m)Object.hasOwnProperty.call(m,f)&&(i=h(f,m),i&&l.push(g(f)+(c?": ":":")+i));return i=0===l.length?"{}":c?"{\n"+c+l.join(",\n"+c)+"\n"+k+"}":"{"+l.join(",")+"}",c=k,i;case"undefined":case"function":default:throw new SyntaxError("json_encode")}};return h("",{"":f})}catch(a){if(!(a instanceof SyntaxError))throw new Error("Unexpected error type in json_encode()");return c.php.last_error_json=4,null}},json_decode:function(strJson){var $global="undefined"!=typeof window?window:GLOBAL;$global.$locutus=$global.$locutus||{};var $locutus=$global.$locutus;$locutus.php=$locutus.php||{};var json=$global.JSON;if("object"==typeof json&&"function"==typeof json.parse)try{return json.parse(strJson)}catch(a){if(!(a instanceof SyntaxError))throw new Error("Unexpected error type in json_decode()");return $locutus.php.last_error_json=4,null}var chars=["\0","­","؀-؄","܏","឴","឵","‌-‏","\u2028- ","⁠-⁯","\ufeff","￰-￿"].join(""),cx=new RegExp("["+chars+"]","g"),j,text=strJson;cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));var m=/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""));return m?j=eval("("+text+")"):($locutus.php.last_error_json=4,null)},explode:function(a,b,c){if(arguments.length<2||"undefined"==typeof a||"undefined"==typeof b)return null;if(""===a||a===!1||null===a)return!1;if("function"==typeof a||"object"==typeof a||"function"==typeof b||"object"==typeof b)return{0:""};a===!0&&(a="1"),a+="",b+="";var d=b.split(a);return"undefined"==typeof c?d:(0===c&&(c=1),c>0?c>=d.length?d:d.slice(0,c-1).concat([d.slice(c-1).join(a)]):-c>=d.length?[]:(d.splice(d.length+c),d))},in_array:function(a,b,c){var d="",e=!!c;if(e){for(d in b)if(b[d]===a)return!0}else for(d in b)if(b[d]==a)return!0;return!1},mt_rand:function(a,b){var c=arguments.length;if(0===c)a=0,b=2147483647;else{if(1===c)throw new Error("Warning: mt_rand() expects exactly 2 parameters, 1 given");a=parseInt(a,10),b=parseInt(b,10)}return Math.floor(Math.random()*(b-a+1))+a}},$model=new Array;$("[data-model]").each(function(a,b){$model.push($(this).attr("data-model"))});var $bind={BindSet:function(a,b,c){var d="";return b.is("select")?d="text"==a?b.find("option:selected").text():b.find("option:selected").val():b.not('[data-plugin="datetimepicker"]').is("input:text")?d=b.val():b.is('input[data-plugin="datetimepicker"]')&&(d="undefined"!=typeof c&&void 0!==c&&null!==c?c.date.format("H:m DD/MM/YYYY"):b.val()),"undefined"!=typeof d&&void 0!==d&&null!==d?d:""},BindCallback:function(callback,elm){return 0!=$validator.isString(callback)&&void("function"==typeof eval("module."+callback)&&("undefined"!=typeof elm&&void 0!==elm&&null!==elm?eval("module."+callback+"(elm)"):eval("module."+callback+"()")))},BindText:function(a,b){if($model.indexOf(b)!==-1){var c=$('[data-model="'+b+'"]');a.text($bind.BindSet("text",c)),c.on("change keyup dp.change",function(b){b.preventDefault(),a.text($bind.BindSet("text",$(this),b))})}else $bind.BindCallback(b)},BindValue:function(a,b){if($model.indexOf(b)!==-1){var c=$('[data-model="'+b+'"]');a.val($bind.BindSet("value",c)),c.on("change keyup dp.change",function(b){b.preventDefault(),a.val($bind.BindSet("value",$(this),b))})}else $bind.BindCallback(b)},BindKey:function(a,b,c){"keyup"==a?b.on("keyup",function(a){a.preventDefault(),$bind.BindCallback(c,$(this))}):"keypress"!=a&&"keydown"!=a||b.on(a,function(a){if($model.indexOf(c)!==-1){if(13==a.which){var b=$('[data-model="'+c+'"]');b.trigger("click")}}else $bind.BindCallback(c,$(this))})},BindForm:function(a,b){$("form").not(".bootstrap-tagsinput input").on("keyup keypress","input",function(a){if(13==a.which)return!1})},BindLoad:function(a,b){$bind.BindCallback(b,a)},BindOn:function(a,b,c){var d=["click","change"];return d.indexOf(a)!=-1&&void b.on(a,function(a){a.preventDefault(),$bind.BindCallback(c,$(this))})},BindData:function(){if($("[data-bind]")[0]){var a="",b="",c="";$("[data-bind]").each(function(d,e){var f=$(this),g=$php.explode(",",f.attr("data-bind"));if($validator.isObject(g)&&g.length>0)for(var h=0;h<g.length;h++)if(b=$php.explode(":",g[h]),a=b[0].trim(),b[1]&&(c=b[1].trim()),1==$validator.isString(a)&&1==$validator.isString(c))switch(a){case"click":$bind.BindOn("click",f,c);break;case"change":$bind.BindOn("change",f,c);break;case"keypress":$bind.BindKey("keypress",f,c);break;case"keydown":$bind.BindKey("keydown",f,c);break;case"keyup":$bind.BindKey("keyup",f,c);break;case"text":$bind.BindText(f,c);break;case"value":$bind.BindValue(f,c);break;case"form":$bind.BindForm(f,c);break;case"load":$bind.BindLoad(f,c)}})}},init:function(){$bind.BindData()}};$(document).ready(function(){$bind.init()}),module.Interface={MobileMenuLeft:function(a){$("body").hasClass("menu-left-opened")?(a.removeClass("is-active"),$("body").removeClass("menu-left-opened"),$("html").css("overflow","auto")):(a.addClass("is-active"),$("body").addClass("menu-left-opened"),$("html").css("overflow","hidden"))},MobileMenuLeftDisable:function(a){$(".hamburger").removeClass("is-active"),$("body").removeClass("menu-left-opened"),$("html").css("overflow","auto")}},module.Form={submitDisable:function(a){},WordLimiter:function(a,b){return $.trim(a).length>b&&(a=$.trim(a).substring(0,b)),a},CheckBoxAll:function(){$(".data-list").on("change","#check-all",function(){$(".table-check input:checkbox").prop("checked",$(this).prop("checked"))})},CheckBoxItem:function(){var a=new Array;return $(".table-check input:checkbox:checked").each(function(){a.push($(this).val())}),a},URLParameter:function(a,b){a=encodeURIComponent(a),b=encodeURIComponent(b);var c=document.location.search,d=a+"="+b,e=new RegExp("(&|\\?)"+a+"=[^&]*");c=c.replace(e,"$1"+d),RegExp.$1||(c+=(c.length>0?"&":"?")+d),History.pushState({state:History.getStateId()+1},document.title,c)},getUrlVars:function(){for(var a,b=[],c=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),d=0;d<c.length;d++)a=c[d].split("="),b.push(a[0]),b[a[0]]=a[1];return b},formatBytes:function(a,b){if(0==a)return"0 Byte";var c=1e3,d=b+1||3,e=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],f=Math.floor(Math.log(a)/Math.log(c));return parseFloat((a/Math.pow(c,f)).toFixed(d))+" "+e[f]},keyAction:function(a,b,c){$(b).keypress(function(b){"enter"==a&&13==b.which&&$(c).click()})}},module.Seo={SEOSnippetForm:function(a){var b="",c="",d="",e="",f=$(".meta-title").val(),g=$(".meta-description").val();0==$validator.isString(f)&&(f=""),0==$validator.isString(g)&&(g="");var h=$("#sp_seo_title").val(),i=$("#sp_seo_site_title").val(),j=$("#sp_seo_url").val(),k=$("#sp_seo_desc").val(),l=$("#sp_seo_keyword").val();1==$validator.isString(h)?(c=h,e='  style="display: none;"'):c=f,d=1==$validator.isString(k)?k:g,b+='<div class="box-typical">',b+='<div class="box-typical-header box-typical-header-bordered panel-heading"><h3>Tối ưu SEO</h3></div>',b+='<div class="box-typical-body b-t-p">',b+='<div class="snippet-text"><span class="snippet-title-group"><span class="snippet-title">'+module.Form.WordLimiter(c,70)+'</span><span class="snippet-site-title"'+e+"> - "+i+"</span></span></div>",b+='<div class="snippet-text"><cite class="snippet-cite">'+j+"</cite></div>",b+='<div class="snippet-text"><span class="snippet-desc">'+module.Form.WordLimiter(d,160)+"</span></div>",b+='<div class="snippet-def">Thiết lập các thẻ mô tả giúp khách hàng dễ dàng tìm thấy website trên công cụ tìm kiếm như Google.</div>',b+='<div class="snippet-btn"><button class="btn btn-secondary" type="button" data-toggle="collapse" aria-expanded="false" data-target="#snippet-editor" aria-controls="snippet-editor">Tùy chỉnh SEO</button></div>',b+='<div id="snippet-editor" class="collapse" aria-expanded="false">',b+='<div class="form-group"><label for="snippet-editor-meta-title">Tiêu đề trang</label><input type="text" class="form-control snippet-editor-title" id="snippet-editor-meta-title" name="seo_title" value="'+h+'" /><small class="text-muted">Tiêu đề tối đa 70 ký tự</small></div>',b+='<div class="form-group"><label for="snippet-editor-meta-description">Mô tả trang</label><textarea class="form-control snippet-editor-description" id="snippet-editor-meta-description" rows="3" name="seo_description">'+k+'</textarea><small class="text-muted">Mô tả tối đa 160 ký tự</small></div>',b+='<div class="form-group"><label for="snippet-editor-meta-keyword">Từ khóa trang</label><input type="text" class="form-control snippet-editor-meta-keyword" id="snippet-editor-meta-keyword" name="seo_keyword" value="'+l+'" /><small class="text-muted">Từ khóa ngăn cách nhau bởi dấu phẩy</small></div>',b+="</div>",b+="</div>",b+="</div>",a.append(b)},SEOSnippetPreview:function(){$(".meta-title, .meta-description, .snippet-editor-title, .snippet-editor-description,.snippet-editor-meta-keyword").on("change keyup",function(){var a=$(".meta-title").val(),b=$(".meta-description").val(),b=$(".meta-description").val();0==$validator.isString(a)&&(a=""),0==$validator.isString(b)&&(b="");var c=$("#snippet-editor-meta-title").val(),d=$("#snippet-editor-meta-description").val(),e=$("#snippet-editor-meta-keyword").val();1==$validator.isString(c)?(a=c,$("#sp_seo_title").val(a),$(".snippet-site-title").hide()):($("#sp_seo_title").val(""),$(".snippet-site-title").show()),1==$validator.isString(d)?(b=d,$("#sp_seo_desc").val(b)):$("#sp_seo_desc").val(""),$("#sp_seo_keyword").val(e),$(".snippet-title").text(module.Form.WordLimiter(a,70)),$(".snippet-desc").text(module.Form.WordLimiter(b,160))})}},module.Install={Step1:function(){$(".step-1").hide(),$(".step-2").show()},Step1Back:function(){$(".step-2").hide(),$(".step-1").show()},Step2:function(a){$(".step-2").hide(),$(".step-1").hide(),$(".heading").hide(),$("#preloader").show();var b=a.parents("form").attr("action");if(0==$validator.isString(b))return!1;var c={};$http.post(b,c,!1).success(function(a){$validator.isObject(stateobj)===!0})}},module.Modal={ScrollImage:function(){$("#attachment-grid").bind("scroll",function(){var a=$(this);if(a.scrollTop()+a.innerHeight()>=a[0].scrollHeight){var b=a.attr("data-next");$validator.isString(b)&&$http.get(b,{},!1).success(function(b){if($validator.isResponse(b)){var c=$php.json_decode(b);$validator.isString(c.data)===!0&&c.data.length>0&&(a.attr("data-next",c.next_page_url),a.append(module.Modal.LoopImage(c.data)))}})}})},SearchImage:function(a){var b={search:$(".modal-search").val()};$http.get("admin/attachment/get-list-image",b,!1).success(function(a){if($validator.isResponse(a)){var b=$php.json_decode(a);b.data.length>0?($("#attachment-grid").attr("data-next",b.next_page_url),$(".modal-list-data").find("#attachment-grid").html(module.Modal.LoopImage(b.data)),$(".modal-list-data").show()):$(".modal-list-data").hide()}})},LoadImage:function(){$http.get("admin/attachment/get-list-image",{}).success(function(a){if($validator.isResponse(a)){var b=$php.json_decode(a);b.data.length<0?$(".modal-list-data").hide():($(".modal-list-data").html('<ul id="attachment-grid" class="clearfix" data-next="'+b.next_page_url+'">'+module.Modal.LoopImage(b.data)+"</ul>"),$(".modal-list-data").show()),$("#media-modal").modal("show"),$("#media-modal").on("shown.bs.modal",function(){module.Modal.ScrollImage()})}})},LoopImage:function(a){var b=a.length,c="",d=0;for(d;d<b;d++)c+='<li data-id="'+a[d].attachment_id+'" class="attachment-item attachment-item-'+a[d].attachment_id+'"><div class="thumbnail-preview"><div class="thumbnail"><div class="centered"><img src="'+a[d].attachment_url+'" alt="'+a[d].attachment_title+'" /></div></div></div></li>';return c},SetImage:function(a){var b=$("#media-modal").attr("data-type"),c="",d="",e="",f="";if("product"==b){var g=!1,h=$(".image-group-list").find("li").length;$(".attachment-item").each(function(a,b){$(this).hasClass("active")&&(d=$(this).attr("data-id"),e=$(this).find("img").attr("src"),f=$(this).find("img").attr("alt"),c+='<li class="box-product-images ui-sortable-handle"><input type="hidden" name="product_image[]" value="'+d+'"><div class="thumbnail-preview"><div class="thumbnail"><div class="centered"><img src="'+e+'" alt="'+f+'" /></div></div></div></li>',g=!0)}),g?($(".image-group-list ul").append(c),$(".image-group-info").hide(),$(".image-group-list").show()):h<0&&($(".image-group-info").show(),$(".image-group-list").hide())}else $(".attachment-item").each(function(a,b){$(this).hasClass("active")&&(d=$(this).attr("data-id"),e=$(this).find("img").attr("src"),f=$(this).find("img").attr("alt"))}),$("#post-image-modal").hide(),$("#post-image-thumbnail img").attr("src",e),$('#post-image-thumbnail input[name="post_image_url"]').val(e),$('#post-image-thumbnail input[name="post_image_id"]').val(d),$("#post-image-thumbnail").show();$("#media-modal").modal("hide")},ChooseImage:function(){var a=$("#media-modal").attr("data-type");$(".modal-list-data").on("click",".attachment-item",function(b){b.preventDefault(),"product"==a?$(this).toggleClass("active"):($(".modal-list-data .attachment-item").not($(this)).removeClass("active"),$(this).toggleClass("active"))})}},module.Table={SetCheckAll:function(){$(".data-list").on("change","#check-all",function(){$(".table-check input:checkbox").prop("checked",$(this).prop("checked"))})},GetCheckItem:function(){var a=new Array;return $(".table-check input:checkbox:checked").each(function(){a.push($(this).val())}),a},Response:function(a,b){$alerts.response(a,b,function(){if($validator.isResponse(a)){var b=$.parseJSON(a);"True"==b.Response&&0==$validator.isString(b.Redirect)&&($(".data-list").html($php.urldecode(b.List)),$("#pagination").html($php.urldecode(b.Page)))}})},Search:function(a,b,c){if(0==$validator.isObject(a))return!1;var d=$(".na-search-input").val();a._token=$("#page_token").val(),a.search=d,a.type="search",0==$validator.isObject(c)&&(c={StateName:{search:d},Title:$(".heading-text").text(),URL:"?search="+d}),c.query=d,c.key="search",$http.post(b,a).success(function(a){1==$validator.isObject(c)&&(module.Form.URLParameter("page","1"),module.Form.URLParameter(c.key,c.query)),module.Table.Response(a)})},Action:function(a){var b={type:"action"},c=a.parents("form").attr("action"),d=module.Form.getUrlVars().search;0==$validator.isString(d)&&(d="");var e=module.Form.getUrlVars().page;0==$validator.isString(e)&&(e=1);var f=module.Table.GetCheckItem();1==$validator.isString(f)&&(b.check=f);var g=$("#action_status").attr("name");1==$validator.isString(g)&&(b[g]=$("#action_status").val()),b.select_action=$(".na-select-action").val(),b._token=$("#page_token").val(),b.page=e,b.search=d,$(".na-select-action").prop("selectedIndex",0),$http.post(c,b).success(function(a){1==$validator.isString(f)&&module.Table.Response(a),1==$validator.isString(g)&&module.Table.StatusSet(a)})},ActionChange:function(a){var b=a.val();if("trash"==b){$(".na-select-action option").remove();var c='<option selected="selected" value="0">Chọn hành động</option><option value="restore">Khôi phục</option><option value="delete">Xóa vĩnh viễn</option>';$(".na-select-action").html(c)}else{$(".na-select-action option").remove();var c='<option selected="selected" value="0">Chọn hành động</option><option value="edit">Chỉnh sửa</option><option value="trash">Xóa</option>';$(".na-select-action").html(c)}},StatusSet:function(a){if($validator.isResponse(a)){var b=$.parseJSON(a);if("True"==b.Response&&0==$validator.isString(b.Redirect)&&1==$validator.isString(b.ActionStatus)){b.ActionStatus.length;$validator.isString(b.ActionStatus.all)&&$("#action_status").find("option[value=all]").text("Tất cả ("+b.ActionStatus.all+")"),
$validator.isString(b.ActionStatus.public)&&$("#action_status").find("option[value=public]").text("Công khai ("+b.ActionStatus.public+")"),$validator.isString(b.ActionStatus.pending)&&$("#action_status").find("option[value=pending]").text("Đang chờ duyệt ("+b.ActionStatus.pending+")"),$validator.isString(b.ActionStatus.draft)&&$("#action_status").find("option[value=draft]").text("Nháp ("+b.ActionStatus.draft+")"),$validator.isString(b.ActionStatus.trash)&&$("#action_status").find("option[value=trash]").text("Xóa ("+b.ActionStatus.trash+")")}}},StatusChange:function(a){var b=a.attr("name");if(0==$validator.isString(b))return!1;var c=a.parents("form").serializeObject(),d=a.parents("form").attr("action");$http.post(d,c).success(function(c){module.Form.URLParameter(b,a.val()),module.Table.Response(c)})}},module.Format={Integer:function(a){a.val(a.val().replace(/\D/g,""))},Number:function(a){a.val(numeral(a.val().replace(/\D/g,"")).format("0,0"))},Currency:function(a){return numeral(a).format("0,0 đ")}},module.General={Tinymce:function(a){tinemce.triggerSave()},SetImage:function(a){var b="",c="";$(".attachment-item").each(function(a,d){$(this).hasClass("active")&&(b=$(this).find(".hidden_attactment_id").val(),c=$(this).find("img").attr("src"))});var d=a.parents("#media-modal").find("#media-modal-list").attr("data-type");"featured"==d&&1==$validator.isString(c)&&($("#featured-thumbnail").find("img").attr("src",c),$("#featured-thumbnail").find("#hidden_featured_image").val(b),$("#featured-thumbnail").removeClass("hidden-xs-up"),$("#featured-modal").addClass("hidden-xs-up"),$("#media-modal").modal("hide"))},RemoveImage:function(a){var b=a.parents("#featured-thumbnail").attr("data-type");"featured"==b&&($("#featured-thumbnail").find("#hidden_featured_image").val(""),$("#featured-thumbnail").addClass("hidden-xs-up"),$("#featured-modal").removeClass("hidden-xs-up"))},GetDistricts:function(a){var b=a.val(),c="",d='<option value="0">Chọn quận/huyện</option>';if(0==$validator.isString(b))return $("#districts").html(d),!1;var e={_token:$("#page_token").val(),province_id:b};$http.post("admin/get-districts",e,!1).success(function(a){if($validator.isResponse(a)){var b=$php.json_decode(a),e=b.length,f=0;if(e<0)return!1;for(c+=d,f;f<e;f++)c+='<option value="'+b[f].district_id+'">'+b[f].district_name+"</option>";$("#districts").html(c)}})},ChangeSlug:function(a){a.parents(".form-group").find('input[name="slug"]').prop("readonly",function(a,b){return!b})},init:function(){}},module.Plugins={ShowWidget:function(a){var b=a.parents(".box-typical").attr("data-widget");return 0!=$validator.isString(b)&&($("#widget-modal").attr("data-widget",b),void $("#widget-modal").modal("show"))},AddWidget:function(a){var b=$("#select_plugin option:selected").val(),c=$("#select_plugin option:selected").text(),d=a.parents("#widget-modal").attr("data-widget"),e=$('.box-typical[data-widget="'+d+'"]').find("table tbody tr").last().attr("data-id");if(0==$validator.isString(d)&&0==$validator.isString(e)&&$validator.isString(b)&&$validator.isString(c))return!1;var f=parseInt(e)+1;0==$validator.isInt(f)&&(f=1);var g={_token:$("#page_token").val(),action:"add",widget:d,plugin:b,order:f},h=a.parents("form").attr("action");$http.get(h,g).success(function(a){$alerts.response(a,"",function(){0==$validator.isInt(e)&&$('.box-typical[data-widget="'+d+'"]').find("table tbody tr").last().remove(),$('.box-typical[data-widget="'+d+'"]').find("table tbody").append('<tr data-id="'+f+'" data-path="'+b+'"><th class="table-title tbl-nowrap column-primary tbl-title-text">'+c+'</th><td class="text-nowrap text-xs-center"><span class="label label-success">Đang hoạt động</span></td><td class="text-xs-center"><div class="table-btn btn-group btn-group-sm"><input type="hidden" name="plugin['+d+"]["+f+']" value="'+b+'"><button type="button" class="btn plugin-widget-edit"><i class="material-icons md-18">mode_edit</i></button><button type="button" class="btn plugin-widget-remove"><i class="material-icons md-18">delete</i></button></div></td></tr>'),$("#widget-modal").modal("hide")})})},EditPluginWidget:function(a){a.on("click",".plugin-widget-edit",function(b){b.preventDefault();var c=$(this),d=c.parents("tr").attr("data-id"),e=c.parents("tr").attr("data-path"),f=c.parents(".box-typical").attr("data-widget");if(0==$validator.isString(f)&&0==$validator.isString(d)&&$validator.isString(e))return!1;var g={_token:$("#page_token").val(),action:"edit",widget:f,plugin:e,order:d},h=a.parents("form").attr("action");$http.get(h,g).success(function(a){$alerts.response(a,"")})})},RemovePluginWidget:function(a){a.on("click",".plugin-widget-remove",function(b){b.preventDefault();var c=$(this),d=c.parents("tr").attr("data-id");if(0==$validator.isInt(d))return!1;var e=c.parents("tr").attr("data-path"),f=c.parents(".box-typical").attr("data-widget");if(0==$validator.isString(f)&&0==$validator.isString(d)&&$validator.isString(e))return!1;var g={_token:$("#page_token").val(),action:"remove",widget:f,plugin:e,order:d},h=a.parents("form").attr("action");$http.get(h,g).success(function(a){$alerts.response(a,"",function(){1==c.parents("tbody").find("tr").length&&c.parents("tbody").append('<tr><td colspan="3"><div class="data-empty">No data</div></td></tr>'),c.parents("tr").remove()})})})},DeleteWidget:function(a){var b=a.parents("form").attr("action"),c=a.parents(".box-typical").attr("data-widget");if(0==$validator.isString(c))return!1;var d={_token:$("#page_token").val(),action:"delete",widget:c};$http.get(b,d).success(function(a){if($validator.isResponse(a)){var b=$php.json_decode(a);"True"==b.Response&&$('.box-typical[data-widget="'+c+'"]').parent().remove()}})},sortable:function(){$(".meta-box-sortables").sortable({connectWith:".meta-box-sortables",handle:".handle-title",cancel:".portlet-toggle",placeholder:"sortable-placeholder",start:function(a,b){b.placeholder.height(b.item.height())}}),$(".postbox").find(".hndle").addClass("ui-widget-header ui-corner-all"),$(".handle-btn").click(function(){var a=$(this);a.closest(".postbox").toggleClass("closed"),a.closest(".postbox").find(".inside").toggle()})},editorTinymce:function(){tinymce.init({selector:"textarea.editor-area",height:300,skin:"mose",plugins:["advlist autolink lists link image charmap print preview hr anchor pagebreak","searchreplace wordcount visualblocks visualchars code fullscreen","insertdatetime media nonbreaking save table contextmenu directionality","emoticons template paste textcolor colorpicker textpattern imagetools"],toolbar1:"insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image",toolbar2:"print preview media | forecolor backcolor emoticons",image_advtab:!0,templates:[{title:"Test template 1",content:"Test 1"},{title:"Test template 2",content:"Test 2"}]})},init:function(){module.Plugins.sortable(),module.Plugins.editorTinymce()}},$(document).ready(function(){module.Plugins.init()}),module.Attachment={Create:function(){function a(a){var b='<div class="uploading-item-wrapper"><div class="uploading-item-name clearfix"><span class="filename original">'+a.name+"</span></div></div>",c='<div class="progress"><div class="bar"></div></div>',d='<div class="uploading-item-info clearfix"><div class="percent">0%</div><div class="filesize"></div></div>';jQuery('<div class="uploading-item">').attr("id","media-item-"+a.id).append(b+c+d).prependTo(jQuery("#media-items"))}function b(a,b){var c=jQuery("#media-item-"+b.id);jQuery(".media-upload-form").width();jQuery(".progress .bar",c).width(b.loaded/b.size*100+"%"),jQuery(".uploading-item-info .percent",c).html(b.percent+"%"),jQuery(".uploading-item-info .filesize",c).html(module.Form.formatBytes(b.size))}function c(a,b){var c=5242880;parseInt(a.settings.filters.max_file_size,10);b.size>c&&setTimeout(function(){b.status<3&&0===b.loaded&&(g(b,m.upload_failed),a.stop(),a.removeFile(b),a.start())},1e4)}function d(a,b){var c=jQuery("#media-item-"+a.id);return b=b.replace(/^<pre>(\d+)<\/pre>$/,"$1"),b.match(/uploading-error/)?(jQuery(".form-alerts").html(b),void c.attr("class","uploading-item error").html("<p>"+m.error_uploading.replace("%s",jQuery.trim(a.name))+"</p>")):(c.find(".uploading-item-wrapper").html(b),c.find(".progress").addClass("completed"),jQuery(".percent",c).html(m.crunching),void e(a,b))}function e(a,b){var c="undefined"==typeof shortform?1:2,d=jQuery("#media-item-"+a.id);2==c&&shortform>2&&(c=shortform),!isNaN(b)&&b||d.find(".uploading-item-wrapper").html(b)}function f(a){jQuery(".form-alerts").show().html('<div class="alert alert-danger" role="alert">'+a+"</div>")}function g(a,b){h(a.id,b)}function h(a,b){var c=jQuery("#media-item-"+a),d=c.find(".filename").text();c.prepend('<div id="media-item-'+a+'" class="uploading-item error"><p><strong>'+m.dismiss+"</strong>"+m.error_uploading.replace("%s",jQuery.trim(d))+b+"</p></div>")}function i(a,b,c,d){var e,h=5242880;switch(b){case plupload.FAILED:g(a,m.upload_failed);break;case plupload.FILE_EXTENSION_ERROR:g(a,m.invalid_filetype);break;case plupload.FILE_SIZE_ERROR:j(d,a);break;case plupload.IMAGE_FORMAT_ERROR:g(a,m.not_an_image);break;case plupload.IMAGE_MEMORY_ERROR:g(a,m.image_memory_exceeded);break;case plupload.IMAGE_DIMENSIONS_ERROR:g(a,m.image_dimensions_exceeded);break;case plupload.GENERIC_ERROR:f(m.upload_failed);break;case plupload.IO_ERROR:e=parseInt(d.settings.filters.max_file_size,10),a.size>h?g(a,m.upload_failed):f(m.io_error);break;case plupload.HTTP_ERROR:f(m.http_error);break;case plupload.INIT_ERROR:break;case plupload.SECURITY_ERROR:f(m.security_error);break;default:g(a,m.default_error)}}function j(a,b){var c;c=m.file_exceeds_size_limit.replace("%s",b.name),jQuery("#media-items").prepend('<div id="media-item-'+b.id+'" class="uploading-item error"><p>'+c+"</p></div>"),a.removeFile(b)}var k,l,m=(window.dialogArguments,{queue_limit_exceeded:"You have attempted to queue too many files.",file_exceeds_size_limit:"%s exceeds the maximum upload size for this site.",zero_byte_file:"This file is empty. Please try another.",invalid_filetype:"This file type is not allowed. Please try another.",not_an_image:"This file is not an image. Please try another.",image_memory_exceeded:"Memory exceeded. Please try another smaller file.",image_dimensions_exceeded:"This is larger than the maximum size. Please try another.",default_error:"An error occurred in the upload. Please try again later.",missing_upload_url:"There was a configuration error. Please contact the server administrator.",upload_limit_exceeded:"You may only upload 1 file.",http_error:"HTTP error.",upload_failed:"Upload failed.",big_upload_queued:"%s exceeds the maximum upload size for the multi-file uploader when used in your browser.",io_error:"IO error.",security_error:"Security error.",file_cancelled:"File canceled.",upload_stopped:"Upload stopped.",dismiss:"Dismiss",crunching:"Completed",deleted:"moved to the trash.",error_uploading:"“%s” has failed to upload."});l=function(){var e=navigator.userAgent.indexOf("Trident/")!=-1||navigator.userAgent.indexOf("MSIE ")!=-1;e||"flash"!==plupload.predictRuntime(mUploaderInit)||mUploaderInit.required_features&&mUploaderInit.required_features.hasOwnProperty("send_binary_string")||(mUploaderInit.required_features=mUploaderInit.required_features||{},mUploaderInit.required_features.send_binary_string=!0),k=new plupload.Uploader(mUploaderInit),k.bind("Init",function(a){$("#plupload-upload-ui")}),k.init(),k.bind("FilesAdded",function(b,c){$(".form-alerts").empty(),plupload.each(c,function(b){a(b)}),b.refresh(),b.start()}),k.bind("UploadFile",function(a,b){c(a,b)}),k.bind("UploadProgress",function(a,c){b(a,c)}),k.bind("Error",function(a,b){i(b.file,b.code,b.message,a),a.refresh()}),k.bind("FileUploaded",function(a,b,c){d(b,c.response)}),k.bind("UploadComplete",function(){})},"object"==typeof mUploaderInit&&l()},TableAction:function(a){var b=$.cookie("VSAttachment");$validator.isString(b)||(b="grid");var c={_token:$("#page_token").val(),mode:b},d=module.Table.GetCheckItem();1==$validator.isString(d)&&(c.check=d);var e=module.Form.getUrlVars().page;1==$validator.isString(e)&&(c.page=e);var f=module.Form.getUrlVars().search;1==$validator.isString(f)&&(c.search=f),c.select_action=$(".na-select-action").val();var g=a.parents("form").attr("action");$(".na-select-action").prop("selectedIndex",0),$http.post(g,c).success(function(a){1==$validator.isString(d)&&module.Table.Response(a)})},TableSearch:function(a){var b=$.cookie("VSAttachment");$validator.isString(b)||(b="grid");var c={mode:b,type:"search"},d=a.parents("form").attr("action");module.Table.Search(c,d)},VSSelect:function(){var a=$.cookie("VSAttachment");$validator.isString(a)||(a="grid"),"list"==a?($(".section-attachment .na-select-action").parent().show(),$(".section-attachment .na-select-btn").parent().show()):($(".section-attachment .na-select-action").parent().hide(),$(".section-attachment .na-select-btn").parent().hide())},ViewSwitch:function(a){var b=a.parents("form").attr("action"),c=a.attr("data-layout");"list"!=c&&(c="grid");var d={_token:$("#page_token").val(),mode:c},e=module.Form.getUrlVars().page;1==$validator.isString(e)&&(d.page=e);var f=module.Form.getUrlVars().search;1==$validator.isString(f)&&(d.search=f),$http.post(b,d).success(function(a){module.Table.Response(a)}),$.cookie("VSAttachment",c,{path:"/"}),$(".view-switch .view-item").removeClass("current"),a.addClass("current"),module.Attachment.VSSelect()},Update:function(a){var b=a.parents("form").serializeObject(),c=a.parents("form").attr("action");$http.post(c,b).success(function(a){$alerts.response(a)})},DeleteGrid:function(){$(".attachment-list").on("click",".attacment-delete",function(a){a.preventDefault();var b=$.cookie("VSAttachment");$validator.isString(b)||(b="grid");var c={_token:$("#page_token").val(),mode:b,attachment_id:$(this).attr("data-id"),select_action:"trash"},d=$(this).parents("form").attr("action");$http.post(d,c).success(function(a){module.Table.Response(a)})})},DeleteCreatePage:function(){$("#media-items").on("click",".attacment-delete",function(a){a.preventDefault();var b=$(this),c={_token:$("#page_token").val(),attachment_id:b.attr("data-id"),select_action:"trash"},d=$(this).parents("form").attr("action");$http.post(d,c).success(function(a){if($validator.isResponse(a)){var c=$php.json_decode(a);"True"==c.Response&&(b.parents(".uploading-item").remove(),$alerts.success("Xóa tập tin thành công","",!0,!0))}})})},UploadFromUrl:function(a){var b={_token:$("#page_token").val(),image_url:$("#image-url").val()},c=a.parents("form").attr("action");$http.post(c,b).success(function(a){})}},module.Customer={TableSearch:function(a){var b={},c=a.parents("form").attr("action");module.Table.Search(b,c)},Submit:function(a){var b=a.parents("form").serializeObject(),c=a.parents("form").attr("action"),d=a.parents("form");return a.parents("form").parsley().isValid()?0!=$validator.isString(d)&&void $http.post(c,b).success(function(a){$alerts.response(a)}):(d.parsley().validate(),!1)}},module.User={TableSearch:function(a){var b={user_status:$("#action_status").val()},c=a.parents("form").attr("action");module.Table.Search(b,c)}},module.account={ForgotPassword:function(){$("#recbtn").click(function(a){a.preventDefault();var b={_token:$("#page_token").val(),email:$("#recEmail").val()},c=$("#recoveryForm").attr("action"),d=module.form.Ajax(b,c);return"undefined"!=typeof d&&void d.success(function(a){if("undefined"!=typeof a&&a.length>5&&module.form.isJson(a)){var b=$.parseJSON(a);"True"==b.Response?($("#recoveryForm").remove(),module.form.Alert(b.Message,"success"),$(".btn-back.hidden").removeClass("hidden")):"False"==b.Response&&module.form.Alert(b.Message,"error")}else module.form.Alert("error")}).complete(function(){}).error(function(){module.form.Alert("error")})})},RecoverySetPass:function(){$("#respassbtn").click(function(a){a.preventDefault();var b={_token:$("#page_token").val(),password:$("#pass").val(),password_confirmation:$("#cpass").val()},c=$("#resetpassForm").attr("action"),d=module.form.Ajax(b,c);return"undefined"!=typeof d&&void d.success(function(a){if("undefined"!=typeof a&&a.length>5&&module.form.isJson(a)){var b=$.parseJSON(a);"True"==b.Response?($("#resetpassForm").remove(),module.form.Alert(b.Message,"success"),$(".btn-back.hidden").removeClass("hidden")):"False"==b.Response&&module.form.Alert(b.Message,"error")}else module.form.Alert("error")}).complete(function(){}).error(function(){module.form.Alert("error")})})},init:function(){module.account.ForgotPassword(),module.account.RecoverySetPass()}},$(document).ready(function(){}),module.Taxonomy={Submit:function(a){var b=a.parents("form").attr("action"),c=a.parents("form").serializeObject();$http.post(b,c).success(function(a){console.log(a),$alerts.response(a)})},TableSearch:function(a){var b={},c=a.parents("form").attr("action");module.Table.Search(b,c)}},module.Variant={DisableOption:function(){var a=[];$(".variant-attributes .variant-option select").each(function(){$(this).children("option").each(function(){$(this).is(":selected")&&a.push($(this).val())})}),$(".variant-attributes .variant-option select").each(function(){$(this).children("option").each(function(){$php.in_array($(this).val(),a)&&"custom"!==$(this).val()?$(this).prop("disabled",!0):$(this).prop("disabled",!1)})})},AddOption:function(a){var b=$(".variant-attributes table tr").length;if(b<4){var c=[];$(".variant-attributes .variant-option select").each(function(){$(this).children("option").each(function(){$(this).is(":selected")&&($(this).prop("disabled",!0),c.push($(this).val()))})}),$(".variant-attributes table").append('<tr class="variant-option"><td class="col-1"><select class="form-control"><option value="title">Tiêu đề</option><option value="size">Kích thước</option><option value="color">Màu sắc</option><option value="material">Vật liệu</option><option value="style">Kiểu dáng</option><option value="custom">Tạo tùy chọn mới</option></select></td><td class="col-2"><div class="input-group"><input type="text" class="form-control" name="variant_option_name[]" value="" data-plugin="tagsinput" /><span class="input-group-btn"><button class="btn btn-remove" type="button"><i class="font-icon material-icons md-18">delete_forever</i></button></span></div></td></tr>'),$('[data-plugin="tagsinput"]').tagsinput({maxChars:50});var d=$(".variant-attributes .variant-option select"),e=[];if(d.last().children("option").each(function(a){$php.in_array($(this).val(),c)?$(this).prop("disabled",!0):e.push(a)}),e){d.last().prop("selectedIndex",e[0]),d.last().children("option:selected").prop("disabled",!0),c.push(d.last().children("option:selected").val());var f=d.last().children("option:selected").val(),g=d.last().children("option:selected").text();d.last().parent().find("input").remove(),"custom"==f?d.last().after('<input type="text" class="form-control" name="variant_option[]" value="" placeholder="VD: Dung lượng" />'):d.last().after('<input type="hidden" class="form-control" name="variant_option[]" value="'+g+'" />')}$(".variant-attributes .variant-option select").each(function(){$(this).children("option").each(function(){$php.in_array($(this).val(),c)&&"custom"!==$(this).val()?$(this).prop("disabled",!0):$(this).prop("disabled",!1)})}),"tracking"==$("#tracking-select").val()?$(".variant-list table .col-6").show():$(".variant-list table .col-6").hide(),module.Variant.ChangeOptionItem(),3==b&&a.parent().hide()}else a.parent().hide()},ChangeOption:function(){$(".variant-attributes").on("change","select",function(){var a=$(this).val(),b=$(this).children("option:selected").text();module.Variant.DisableOption(),$(this).parent().find("input").remove(),"custom"==a?$(this).after('<input type="text" class="form-control" name="variant_option[]" value="" placeholder="VD: Dung lượng" />'):$(this).after('<input type="hidden" class="form-control" name="variant_option[]" value="'+b+'" />')})},RemoveOption:function(){$(".variant-attributes").on("click",".btn-remove",function(a){a.preventDefault(),$(this).parents(".variant-option").remove();var b=$(".variant-attributes .variant-option").length;b<4&&$(".variant-option-add").show(),module.Variant.AddOptionItem()})},AddOptionItem:function(){var a=$(".variant-attributes .variant-option"),b="";if(a.length>0&&a.length<4){var c=0,d=[],e=a.eq(0).find('[data-plugin="tagsinput"]').tagsinput("items"),f=a.eq(1).find('[data-plugin="tagsinput"]').tagsinput("items"),g=a.eq(2).find('[data-plugin="tagsinput"]').tagsinput("items"),h=$("#price-new").val(),i=$("#product-sku").val(),j=$("#product-barcode").val(),k=$("#product-quantity").val();$validator.isString(e)&&$validator.isString(f)&&$validator.isString(g)?(c=e.length*f.length*g.length,$.each(e,function(a,b){var c=b;$.each(f,function(a,b){var e=b;$.each(g,function(a,b){d.push(c+" / "+e+" / "+b)})})})):!$validator.isString(e)&&$validator.isString(f)&&$validator.isString(g)?(c=f.length*g.length,$.each(f,function(a,b){var c=b;$.each(g,function(a,b){d.push(c+" / "+b)})})):$validator.isString(e)&&!$validator.isString(f)&&$validator.isString(g)?(c=e.length*g.length,$.each(e,function(a,b){var c=b;$.each(g,function(a,b){d.push(c+" / "+b)})})):$validator.isString(e)||$validator.isString(f)||!$validator.isString(g)?$validator.isString(e)||!$validator.isString(f)||$validator.isString(g)?$validator.isString(e)&&$validator.isString(f)&&!$validator.isString(g)?(c=e.length*f.length,$.each(e,function(a,b){var c=b;$.each(f,function(a,b){d.push(c+" / "+b)})})):!$validator.isString(e)||$validator.isString(f)||$validator.isString(g)||(c=e.length,$.each(e,function(a,b){d.push(b)})):(c=f.length,$.each(f,function(a,b){d.push(b)})):(c=g.length,$.each(g,function(a,b){d.push(b)}));var l=0,m=1;for(l;l<c;l++){var n="";i&&(n=i+"-"+m),b+='<tr class="variant-item"><th class="col-1 table-check"><input id="variant-id-'+m+'" class="filled-tbl" type="checkbox" name="variant_item[][id]" value="'+m+'" checked><label for="variant-id-'+m+'"></label></th><td class="col-2"><span class="variant-title text-primary">'+d[l]+'</span></td><td class="col-3"><div class="input-group"><input type="text" class="form-control variant-price" name="variant_item[][price]" value="'+h+'" /><span class="input-group-addon">₫</span></div></td><td class="col-4"><input type="text" class="form-control variant-sku" name="variant_item[][sku]" value="'+n+'" /></td><td class="col-5"><input type="text" class="form-control variant-barcode" name="variant_item[][barcode]" value="'+j+'" /></td><td class="col-6"><input type="number" class="form-control variant-quantity" name="variant_item[][quantity]" value="'+k+'" /></td></tr>',m++}$(".variant-item-list table tbody").html(b)}else 0===a.length&&$(".variant-item-list table tbody").html(b);"tracking"==$("#tracking-select").val()?$(".variant-item-list table .col-6").show():$(".variant-item-list table .col-6").hide()},ChangeOptionItem:function(){var a=$(".variant-attributes .variant-option");a.length>0&&a.length<4&&a.on("change",'[data-plugin="tagsinput"]',function(){module.Variant.AddOptionItem()}),$(".variant-item-list").on("keypress",".variant-price",function(a){module.Format.Number($(this))})},SetValue:function(a){var b=a.attr("data-value");if($(".variant-item-list .variant-item").length>0){var c=a.val();"price"==b?$(".variant-price").val(c):"sku"==b?$(".variant-sku").each(function(a){a+=1,$(this).val(c+"-"+a)}):"barcode"==b?$(".variant-barcode").val(c):"quantity"==b&&$(".variant-quantity").val(c)}},Delete:function(){$(".variant-table").on("click",".btn-delete",function(a){a.preventDefault();var b=$(this),c={_token:$("#page_token").val(),variant_id:b.parents("tr").attr("data-id")};$http.post("admin/product/variant/delete/"+b.parents(".variant-table").attr("data-product-id"),c).success(function(a){if($validator.isResponse(a)){var c=$php.json_decode(a);"True"==c.Response&&b.parents("tr").remove()}})})},LoadEditModal:function(){$(".variant-table").on("click",".btn-edit",function(a){a.preventDefault(),$("#modal-variant-add").find("form").attr("action",$("#modal-variant-add").find("form").attr("action").replace("admin/product/variant/create","admin/product/variant/edit"));var b=$("#modal-variant-add").find("form").attr("action"),c=$(this).parents("tr").attr("data-id"),d={variant_id:c};$http.get(b,d).success(function(a){if($validator.isResponse(a)){$("#modal-variant-add").find("form")[0].reset(),$("#modal-variant-add").find(".modal-title").text("Chỉnh sửa phiên bản"),$("#modal-variant-add").find(".modal-footer .btn-primary").text("Lưu thay đổi");var b=$php.json_decode(a),d=b.option.length,e=0,f="";for(f+='<div class="row">',e;e<d;e++)f+=2==d?'<div class="col-sm-6 col-xs-12">':3==d?'<div class="col-sm-4 col-xs-12">':'<div class="col-sm-12 col-xs-12">',f+='<div class="form-group"><label>'+b.option[e].variant_option+'</label><input type="hidden" class="form-control" name="variant_option[]" value="'+b.option[e].variant_option+'" /><input type="text" class="form-control" name="variant_option_name[]" value="'+b.option[e].variant_option_name+'" /></div>',f+="</div>";f+='</div><input type="hidden" class="form-control" name="variant_id" value="'+c+'" />',$("#modal-variant-add").find(".variant-option-data").html(f),$('#modal-variant-add input[name="price_new"]').val(numeral(b.price_new).format("0,0")),$('#modal-variant-add input[name="price_old"]').val(numeral(b.price_old).format("0,0")),$('#modal-variant-add input[name="sku"]').val(b.sku),$('#modal-variant-add input[name="barcode"]').val(b.barcode),$('#modal-variant-add input[name="product_weight"]').val(numeral(b.weight).format("0,0")),1==b.ship?$('#modal-variant-add input[name="product_ship"]').prop("checked",!0):$('#modal-variant-add input[name="product_ship"]').prop("checked",!1),1==b.tracking_policy?($('#modal-variant-add select[name="tracking"]').val("tracking"),$('#modal-variant-add input[name="product_quantity"]').val(numeral(b.quantity).format("0,0")).prop("readonly",!1),1==b.out_of_stock?$('#modal-variant-add input[name="quantity_limit"]').prop("checked",!0):$('#modal-variant-add input[name="quantity_limit"]').prop("checked",!1),$('#modal-variant-add input[name="quantity_limit"]').parents(".form-group").show()):($('#modal-variant-add select[name="tracking"]').val("notracking"),$('#modal-variant-add input[name="product_quantity"]').val("").prop("readonly",!0),$('#modal-variant-add input[name="quantity_limit"]').prop("checked",!1),$('#modal-variant-add input[name="quantity_limit"]').parents(".form-group").hide()),$("#modal-variant-add").modal("show")}})})},LoadAddModal:function(){$("#modal-variant-add").find("form").attr("action",$("#modal-variant-add").find("form").attr("action").replace("admin/product/variant/edit","admin/product/variant/create"));var a=$("#modal-variant-add").find("form").attr("action");$http.get(a,{}).success(function(a){if($validator.isResponse(a)){$("#modal-variant-add").find("form")[0].reset(),$("#modal-variant-add").find(".modal-title").text("Tạo phiên bản mới"),$("#modal-variant-add").find(".modal-footer .btn-primary").text("Tạo mới");var b=$php.json_decode(a),c=b.length,d=0,e="";for(e+='<div class="row">',d;d<c;d++)e+=2==c?'<div class="col-sm-6 col-xs-12">':3==c?'<div class="col-sm-4 col-xs-12">':'<div class="col-sm-12 col-xs-12">',e+='<div class="form-group"><label>'+b[d].variant_name+'</label><input type="text" class="form-control" name="variant_option_name[]" value="" /></div>',e+="</div>";e+="</div>",$("#modal-variant-add").find(".variant-option-data").html(e),$("#modal-variant-add").modal("show")}})},SubmitModal:function(){$("#modal-variant-add").on("click",".btn-submit",function(a){var b=$(this).parents("form").attr("action"),c=$(this).parents("form").serializeObject();c._token=$("#page_token").val(),$http.post(b,c).success(function(a){if($validator.isResponse(a)){var b=$php.json_decode(a);"True"==b.Response&&($(".variant-table").html($php.urldecode(b.Data)),$("#modal-variant-add").modal("hide"))}})})},LoadOptionModal:function(){var a=$("#modal-option-edit").find("form").attr("action");$http.get(a,{}).success(function(a){if($validator.isResponse(a)){var b=$php.json_decode(a),c=b.length,d=0,e=0,f="",g=[];for(e;e<c;e++)g.push(b[e].variant_option);for(d;d<c;d++){var h="",i="",j="",k="",l="",m="",n="",o="",p="",q="",r="",s="",t="";f+='<tr class="variant-option">',$.each(g,function(){"Tiêu đề"==s?n=" disabled":"Kích thước"==s?o=" disabled":"Màu sắc"==s?p=" disabled":"Vật liệu"==s?q=" disabled":"Kiểu dáng"==s&&(r=" disabled")}),"Tiêu đề"==b[d].variant_option?(h=" selected",s='<input type="hidden" class="form-control" name="variant_option[]" value="'+b[d].variant_option+'" />'):"Kích thước"==b[d].variant_option?(i=" selected",s='<input type="hidden" class="form-control" name="variant_option[]" value="'+b[d].variant_option+'" />'):"Màu sắc"==b[d].variant_option?(j=" selected",s='<input type="hidden" class="form-control" name="variant_option[]" value="'+b[d].variant_option+'" />'):"Vật liệu"==b[d].variant_option?(k=" selected",s='<input type="hidden" class="form-control" name="variant_option[]" value="'+b[d].variant_option+'" />'):"Kiểu dáng"==b[d].variant_option?(l=" selected",s='<input type="hidden" class="form-control" name="variant_option[]" value="'+b[d].variant_option+'" />'):(m=" selected",s='<input type="text" class="form-control" name="variant_option[]" placeholder="VD: Dung lượng" value="'+b[d].variant_option+'" />'),f+='<td class="col-1"><select class="form-control"><option value="title"'+n+h+'>Tiêu đề</option><option value="size"'+o+i+'>Kích thước</option><option value="color"'+p+j+'>Màu sắc</option><option value="material"'+q+k+'>Vật liệu</option><option value="style"'+r+l+'>Kiểu dáng</option><option value="custom"'+m+">Tạo tùy chọn mới</option></select>"+s+"</td>";var u=b[d].variant_option_name.length,v=0;if(u>0){for(v;v<u;v++)t+=b[d].variant_option_name[v]+",";t=t.substring(0,t.length-1)}f+='<td class="col-2"><div class="input-group"><input type="text" class="form-control" name="variant_option_name[]" value="'+t+'" data-plugin="tagsinput" /><span class="input-group-btn"><button class="btn btn-remove" type="button"><i class="font-icon material-icons md-18">delete_forever</i></button></span></div></td>',f+="</tr>"}$("#modal-option-edit").find(".variant-option-content table tbody").html(f),$('[data-plugin="tagsinput"]').tagsinput({maxChars:50}),$("#modal-option-edit").modal("show")}})},OptionModal:function(a){var b=a.parents("form").attr("action"),c=a.parents("form").serializeObject();c._token=$("#page_token").val(),$http.post(b,c).success(function(a){if($validator.isResponse(a)){var b=$php.json_decode(a);"True"==b.Response&&$(".variant-table").html($php.urldecode(b.Data)),$("#modal-option-edit").modal("hide")}})},LoadSortModal:function(){var a=$("#modal-variant-sort").find("form").attr("action");$http.get(a,{}).success(function(a){if($validator.isResponse(a)){var b=$php.json_decode(a),c=b.length,d=0,e="";for(e+='<ul class="variant-sort">',d;d<c;d++){e+='<li><div class="variant-parent"><i class="font-icon material-icons">list</i> <span class="font-lg-size">'+b[d].variant_option+'</span><input type="hidden" class="form-control" name="variant_option[item_'+d+']" value="'+b[d].variant_option+'" /></div>';var f=b[d].variant_option_name.length,g=0;if(f>0){for(e+='<ul class="variant-child clearfix">',g;g<f;g++)e+="<li><span>"+b[d].variant_option_name[g]+'</span><input type="hidden" class="form-control" name="variant_option_name[item_'+d+'][]" value="'+b[d].variant_option_name[g]+'" /></li>';e+="</ul>"}e+="</li>"}e+="</ul>",$("#modal-variant-sort").find(".variant-sort-data").html(e),$(".variant-sort").sortable({placeholder:"sortable-placeholder",start:function(a,b){b.placeholder.height(b.item.height())}}),$(".variant-child").sortable({start:function(a,b){b.placeholder.height(b.item.height())}}),$("#modal-variant-sort").modal("show")}})},SortModal:function(a){var b=a.parents("form").attr("action"),c=a.parents("form").serializeObject();c._token=$("#page_token").val(),$http.post(b,c).success(function(a){
if($validator.isResponse(a)){var b=$php.json_decode(a);"True"==b.Response&&($(".variant-table").html($php.urldecode(b.Data)),$("#modal-variant-sort").modal("hide"))}})},LoadImageModal:function(){$(".variant-table").on("click",".variant-thumb",function(a){a.preventDefault();var b=$(this).parents("tr").attr("data-id"),c=$(this).find("img").attr("data-id"),d=$("#modal-variant-image").find("form").attr("action");$http.get(d,{}).success(function(a){if($validator.isResponse(a)){var d=$php.json_decode(a);if($("#modal-variant-image").attr("data-variant",b),"True"==d.Response){var e="";if(d.Data.length<0)$(".variant-image-data").html("");else{var f=d.Data.length,g=0;for(e+='<ul id="attachment-grid" class="clearfix">',g;g<f;g++){var h="";d.Data[g].id==c&&(h=" active"),e+='<li data-id="'+d.Data[g].id+'" class="attachment-item attachment-item-'+d.Data[g].id+h+'"><div class="thumbnail-preview"><div class="thumbnail"><div class="centered"><img src="'+d.Data[g].url+'" /></div></div></div></li>'}e+="</ul>"}$(".variant-image-data").html(e),$("#modal-variant-image").modal("show")}}})}),$(".variant-image-data").on("click",".attachment-item",function(a){a.preventDefault(),$(".variant-image-data .attachment-item").not($(this)).removeClass("active"),$(this).toggleClass("active")})},ImageModal:function(a){var b="",c="",d="";$(".variant-image-data .attachment-item").each(function(a,e){$(this).hasClass("active")&&(b=$(this).attr("data-id"),c=$(this).find("img").attr("src"),d=$(this).find("img").attr("alt"))}),$validator.isString(b)||(b=0);var e=$("#modal-variant-image").attr("data-variant"),f=a.parents("form").attr("action"),g={_token:$("#page_token").val(),variant_id:e,attachment_id:b};$http.post(f,g).success(function(a){if($validator.isResponse(a)){var d=$php.json_decode(a);"True"==d.Response&&(0!=b?$(".variant-table").find('tr[data-id="'+e+'"]').find(".variant-thumb").html('<div class="thumbnail-preview"><div class="thumbnail"><div class="centered"><img data-id="'+b+'" src="'+c+'"></div></div></div>'):$(".variant-table").find('tr[data-id="'+e+'"]').find(".variant-thumb").html('<i class="font-icon material-icons md-20">photo_camera</i>'))}}),$("#modal-variant-image").modal("hide")}},module.Product={Submit:function(a){var b=a.parents("form").attr("action"),c=a.parents("form").serializeObject();$http.post(b,c).success(function(a){$alerts.response(a)})},AddCategory:function(){var a={_token:$("#page_token").val(),submit_type:"quick_create",name:$(".new-category").val(),parent:$(".new-category-parent").val()};$http.post("admin/taxonomy/post-category/create",a).success(function(a){if($validator.isResponse(a)){var b=$php.json_decode(a);if("True"==b.Response){if($("ul.taxonomy-checklist")[0]){var c=new Array;$("ul.taxonomy-checklist li").each(function(a,b){c.push($(this).attr("data-order"))});var d=c.sort(function(a,b){return b-a});$("ul.taxonomy-checklist").prepend('<li data-id="'+b.taxonomy_id+'" data-text="'+b.taxonomy_name+'" data-order="'+d[0]+'"><input id="cat-'+b.taxonomy_id+'" class="filled-in" type="checkbox" name="post_category['+d[0]+']" value="'+b.taxonomy_id+'" /><label for="cat-'+b.taxonomy_id+'">'+b.taxonomy_name+"</label></li>")}$(".new-category").val(""),$(".new-category-parent").val("0")}}})},TableSearch:function(a){var b={product_status:$("#action_status").val()},c=a.parents("form").attr("action");module.Table.Search(b,c)},ModalListImage:function(){var a={};$http.get("admin/attachment/get-list-image",a).success(function(a){$validator.isResponse(a)&&(module.General.LoadModalImage(a),$("#media-modal").modal("show"),$("#media-modal").on("shown.bs.modal",function(){module.General.ScrollModalImage()}),module.General.SearchModalImage())})},UploadFromUrl:function(a){var b={_token:$("#page_token").val(),image_url:$("#image-url").val()},c=a.parents("form").attr("action");$http.post(c,b).success(function(a){$alerts.response(a)})},ChangeTracking:function(){"tracking"==$("#tracking-select").val()?($("#product-quantity").prop("readonly",!1),$("#quantity-limit").parent().show(),$(".variant-item-list table .col-6").show()):($("#product-quantity").prop("readonly",!0),$("#quantity-limit").parent().hide(),$(".variant-item-list table .col-6").hide())},SetQuantity:function(a){},SearchProductTaxonomy:function(a){var b=a.val(),c=a.parents(".dropdown-select").attr("data-name"),d=a.parents(".dropdown-select").attr("data-slug"),e=new Array,f=a.parents(".dropdown").find("input."+d);$(f).each(function(){e.push($(this).val())});var g={_token:$("#page_token").val(),type:c,search:b,taxonomy_id:e};$http.post("admin/product/search-taxonomy",g,!1).success(function(b){if($validator.isResponse(b)){var c=$php.json_decode(b),d=c.length,f=0,g="";for(f;f<d;f++){var h="";$php.in_array(c[f].taxonomy_id,e)&&(h=' class="selected"'),g+="<li"+h+'><a class="dropdown-item" href="javascript:;" data-id="'+c[f].taxonomy_id+'"><span>'+c[f].taxonomy_name+'</span><i class="font-icon material-icons md-18">check</i></a></li>'}a.parents(".dropdown-select").find("ul").html(g)}})}},module.Order={CreateCustomer:function(a){if($validator.isResponse(a)){var b=$php.json_decode(a);"True"==b.Response?($validator.isString(b.email)?($(".customer-info").find(".customer-email").show(),$(".customer-info").find(".customer-email .text").text(b.email)):($(".customer-info").find(".customer-email").hide(),$(".customer-info").find(".customer-email .text").text("")),$validator.isString(b.order_count)?$(".customer-info").find(".order-count").text()?$(".customer-info").find(".order-count").text(b.order_count):$(".customer-info").find(".order-count").text("0"):($(".customer-info").find(".customer-email").hide(),$(".customer-info").find(".customer-email .text").text("")),$validator.isString(b.fullname)?($(".customer-ship").find(".customer-fullname").show(),$(".customer-ship").find(".customer-fullname .text").text(b.fullname),$(".customer-info").find(".customer-fullname").show(),$(".customer-info").find(".customer-fullname .text").text(b.fullname)):($(".customer-ship").find(".customer-fullname").hide(),$(".customer-ship").find(".customer-fullname .text").text("")),$validator.isString(b.phone)?($(".customer-ship").find(".customer-phone").show(),$(".customer-ship").find(".customer-phone .text").text(b.phone)):($(".customer-ship").find(".customer-phone").hide(),$(".customer-ship").find(".customer-phone .text").text("")),$validator.isString(b.address)?($(".customer-ship").find(".customer-address").show(),$(".customer-ship").find(".customer-address .text").text(b.address)):($(".customer-ship").find(".customer-address").hide(),$(".customer-ship").find(".customer-address .text").text("")),$validator.isString(b.district_name)?($(".customer-ship").find(".customer-district").show(),$(".customer-ship").find(".customer-district .text").text(b.district_name)):($(".customer-ship").find(".customer-address").hide(),$(".customer-ship").find(".customer-address .text").text("")),$validator.isString(b.province_name)?($(".customer-ship").find(".customer-province").show(),$(".customer-ship").find(".customer-province .text").text(b.province_name)):($(".customer-ship").find(".customer-province").hide(),$(".customer-ship").find(".customer-province .text").text("")),$validator.isString(b.fullname)||$validator.isString(b.phone)||$validator.isString(b.address)||$validator.isString(b.district_name)||$validator.isString(b.province_name)?$(".order-customer-ship").show():$(".order-customer-ship").hide(),$(".order-customer-info").show(),$(".order-customer-search").hide()):($(".order-customer-info").hide(),$(".order-customer-search").show())}},CreateCustomer:function(a){var b=a.parents("form").serializeObject();b._token=$("#page_token").val();var c=a.parents("form").attr("action");$http.post(c,b).success(function(a){})},CreateProduct:function(a){var b=a.parents("form").serializeObject();b._token=$("#page_token").val();var c=a.parents("form").attr("action");$http.post(c,b).success(function(a){})},TableSearch:function(a){var b={order_status:$("#action_status").val()},c=a.parents("form").attr("action");module.Table.Search(b,c)},RenderModal:function(){$(".box-search-advance").on("click",".modal-quick-add",function(a){a.preventDefault(),console.log("ok");var b=$(this).parents(".box-search-advance").attr("data-type");return 0!=$validator.isString(b)&&void("product"==b?$("#modal-product").modal("show"):"customer"==b&&$("#modal-customer").modal("show"))})},RenderDropdown:function(a){var b=a.attr("data-type");return 0!=$validator.isString(b)&&void a.on("click",function(b){$(this).find(".search-panel").addClass("active"),$("html").one("click",function(){a.find(".search-panel").removeClass("active")}),b.stopPropagation()})},GetDropdownData:function(a){var b="",c=a.parents(".box-search-advance").attr("data-type");return 0!=$validator.isString(c)&&("product"==c?(b='<div class="search-panel"><div class="search-panel-header"><div class="search-additem modal-quick-add"><i class="font-icon material-icons md-18">add_circle</i><span>Tạo mới sản phẩm</span></div></div><div class="search-panel-body"></div></div>',a.parents(".box-search-advance").append(b)):"customer"==c&&(b='<div class="search-panel"><div class="search-panel-header"><div class="search-additem modal-quick-add"><i class="font-icon material-icons md-18">add_circle</i><span>Tạo mới khách hàng</span></div></div><div class="search-panel-body"></div></div>',a.parents(".box-search-advance").append(b)),void a.one("click",function(b){b.preventDefault(),module.Order.DropdownSearch(a)}))},ShowDropdownData:function(a,b){var c=a.parents(".box-search-advance").attr("data-type");if($validator.isResponse(b)||$validator.isString(c)){var d=$php.json_decode(b),e="";if("product"==c){e+='<ul id="box-search-result" class="clearfix product">';var f=d.length,g=0;for(g;g<f;g++)e+='<li data-id="'+d[g].product_id+'">',e+='<div class="tbl">',e+='<div class="product-thumb tbl-cell">',e+='<img src="'+d[g].product_image+'" title="'+d[g].product_name+'" />',e+="</div>",e+="",e+="",e+="",e+="",e+="",e+="",e+="",e+="</li>";e+="</ul>"}a.parents(".box-search-advance").find(".search-panel-body").html($php.urldecode(d.List))}},DropdownSearch:function(a){var b=a.parents(".box-search-advance").attr("data-type"),c=a.val(),d=a.attr("name");if(0==$validator.isString(b)&&0==validator.isString(d))return!1;0==$validator.isString(c)&&(c="");var e={search:c},f="";"product"==b?f="admin/order/get-product":"customer"==b&&(f="admin/order/get-customer"),$http.get(f,e).success(function(a){})}},module.Discount={TypeChange:function(a){var b=a.val();$("#discount-offer").val();2==b?($(".discount-coupon").hide(),$("#discount-title-lbl").text("Tên chương trình khuyến mãi"),$("#discount-title").val(""),$("#promotion-allow").attr("checked",!1),$("#limit").prop("checked",!0),$("#discount-limit").val("").prop("readonly",!0)):($(".discount-coupon").show(),$("#discount-title-lbl").text("Tên mã khuyến mãi"))},LimitSet:function(a){a.is(":checked")?$("#discount-limit").prop("readonly",!0):$("#discount-limit").prop("readonly",!1),$("#discount-limit").val(""),$("#discount-limit").parsley().reset()},TakeSet:function(a){var b=a.val();a.val(module.Format.Currency(b.replace(/\D/g,"")));var c=$("#discount-option").val();"percentage"==c&&b>100&&a.val("100")},DateLimit:function(a){a.is(":checked")?$("#end-date").prop("readonly",!0).val(""):$("#end-date").prop("readonly",!1)},OptionSet:function(a){var b=a.val();$("#discount-option").val();"percentage"==discount_type&&b>100&&a.val("100")},OptionChange:function(a){var b=a.val();$("#discount-take").val("");"percentage"==b?$("#discount-per").show():$("#discount-per").hide()},GenerateCode:function(){$http.get("admin/discount/generate-code",{},!1).success(function(a){$("#discount-title").val(a),$("#discount-title").parsley().reset()})},OfferOption:function(){var a=$("#discount-offer").val(),b=$("#discount-type").val();if($(".offer-content-group").hide(),$(".offer-option-group").hide(),"amount_order"==a?$("#offer-amount-order").show():"product_group"==a?$("#offer-product-group").show():"product"==a?$("#offer-product").show():"customer_group"==a&&$("#offer-customer-group").show(),2==b)"product_group"!=a&&"product"!=a||$("#offer-option-2").show();else if("product_group"==a||"product"==a){var c=$("#discount-option").val();"amount"==c&&$("#offer-option-1").show()}},OfferItemSet:function(){$("#offer-content").on("click",".dropdown-item",function(a){a.preventDefault();var b=$(this),c=b.attr("data-id"),d=b.attr("data-text");$validator.isString(c)&&(b.parents(".dropdown-search").find('button[data-toggle="dropdown"] span').text(d),b.parents(".offer-content-group").find(".offer-value").val(c))})},OfferItemSearch:function(a){var b=a.attr("data-type"),c=a.parents(".dropdown-search").find(".dropdown-search-input input").val();0==$validator.isString(c)&&(c=a.val());var d={_token:$("#page_token").val(),offer_type:b,search:c};$http.get("admin/discount/offer-item",d,!1).success(function(b){if(1==$validator.isResponse(b)){var c=$php.json_decode(b),d=c.length,e=0,f="";for(e;e<d;e++)f+='<a class="dropdown-item" href="javascript:;" data-id="'+c[e].id+'" data-text="'+c[e].text+'">'+c[e].text+"</a>";a.parents(".dropdown-search").find(".dropdown-item-list").html(f),a.parents(".dropdown-search").find(".dropdown-loading").hide()}else a.parents(".dropdown-search").find(".dropdown-item-list").html(""),a.parents(".dropdown-search").find(".dropdown-loading").show(),a.parents(".dropdown-search").find(".dropdown-loading").text("Không tìm thấy kết quả.")})},Create:function(a){var b=a.parents("form").serializeObject(),c=a.parents("form").attr("action"),d=a.parents("form");return a.parents("form").parsley().isValid()?void $http.post(c,b).success(function(a){$alerts.response(a)}):(d.parsley().validate(),!1)},Detail:function(){$(".discount-list").on("click",".discount-title a",function(a){a.preventDefault();var b=$(this),c=b.parents("tr").attr("data-id"),d=b.parents("tr").find(".discount-type").attr("data-type"),e=b.parents("tr").find(".discount-type").text().trim(),f=b.parents("tr").find(".discount-type").attr("data-promotion"),g=b.parents("tr").find(".discount-title").text().trim(),h=b.parents("tr").find(".discount-status").attr("data-text"),i=b.parents("tr").find(".discount-date-start").text().trim(),j=b.parents("tr").find(".discount-date-end"),k=b.parents("tr").find(".discount-limit").attr("data-limitstart"),l=b.parents("tr").find(".discount-limit").attr("data-limitend"),m=b.parents("tr").attr("data-take"),n=b.parents("tr").attr("data-option");if(0==$validator.isString(c))return!1;var o={discount_id:c};$http.get("admin/discount/detail",o).success(function(a){if($("#discount-modal .lbl-type").text(e),$("#discount-modal .lbl-title").text(g),1==d?1==f?($("#discount-modal .lbl-promotion").text("Sử dụng chung với chương trình khuyến mãi"),$("#discount-modal .lbl-promotion").parent().show()):($("#discount-modal .lbl-promotion").text(""),$("#discount-modal .lbl-promotion").parent().show()):($("#discount-modal .lbl-promotion").text(""),$("#discount-modal .lbl-promotion").parent().hide()),h="active"==h?'<span class="text-success font-weight-bold">Đã kích hoạt</span>':"deactive"==h?'<span class="text-primary font-weight-bold">Tạm ngưng</span>':"wating"==h?'<span class="text-muted font-weight-bold">Chưa kích hoạt</span>':'<span class="text-danger font-weight-bold">Hết hạn</span>',$("#discount-modal .lbl-status").html(h),$("#discount-modal .lbl-date-start").html("Bắt đầu khuyến mãi: <strong>"+i+"</strong>"),j.attr("data-text")>0?$("#discount-modal .lbl-date-end").html("Kết thúc khuyến mãi: <strong>"+j.text().trim()+"</strong>"):$("#discount-modal .lbl-date-end").html("<strong>Khuyến mãi không bao giờ hết hạn</strong>"),0==k?$("#discount-modal .lbl-limit").html("<strong>Không giới hạn số lần sử dụng</strong>"):$("#discount-modal .lbl-limit").html("Số lần sử dụng khuyến mãi: <strong>"+l+"/"+k+"</strong>"),$validator.isResponse(a)){var b=$php.json_decode(a),c="";1==b.discount_offer?c="tất cả đơn hàng":2==b.discount_offer?c="cho đơn hàng từ <strong>"+b.money_over+"VND</strong>":3==b.discount_offer?c="cho nhóm sản phẩm":4==b.discount_offer?c="cho sản phẩm":5==b.discount_offer&&(c="cho nhóm khách hàng"),c=1==$validator.isString(b.relationship_url)?c+' <a href="'+b.relationship_url+'">'+b.relationship_name+"</a>":c+" <strong>"+b.relationship_name+"</strong>",1==b.discount_type?3==b.discount_offer||4==b.discount_offer||5==b.discount_offer?c+=1==b.offer_option?" (áp dụng cho đơn hàng)":" (áp dụng cho từng sản phẩm trong đơn hàng)":2==b.discount_offer&&(c+=" trở lên"):c=c+" khi mua từ "+b.offer_option+" sản phẩm trở lên","percentage"==n?n="%":(n=" &#8363;",m=numeral(m).format("0,0")),$("#discount-modal .lbl-group-info").html("Giảm <strong>"+m+n+"</strong> "+c),$("#discount-modal").modal("show")}})})},TableSearch:function(a){var b={discount_status:$("#action_status").val()},c=a.parents("form").attr("action");module.Table.Search(b,c)}},module.Navigation={Setup:function(){},Add:function(){}},module.Website={navigation_Setup:function(){$("ol.menu-sortable").nestedSortable({forcePlaceholderSize:!0,handle:".item-title",helper:"clone",items:"li",opacity:.6,placeholder:"placeholder",collapsedClass:".menu-item-edit-active",revert:250,tabSize:25,tolerance:"pointer",toleranceElement:"> div",maxLevels:4,isTree:!0,expandOnHover:700,startCollapsed:!1,change:function(){}});$(".menu-sortable").on("click",".item-edit",function(){var a=$(this).attr("data-id");$("#menu-item-settings-"+a).toggle(),$(this).toggleClass("icon-arrow-up").toggleClass("icon-arrow-down"),$("#menu-item-"+a).toggleClass("menu-item-edit-inactive").toggleClass("menu-item-edit-active")}),$(".menu-sortable").on("click",".item-delete",function(){var a=$(this).attr("data-id");$("#menu-item-"+a).remove()})},navigation_Add:function(){$(".taxonomy-list-btn").on("click",function(a){var b=$(this).parent().find(".taxonomy-checklist"),c=0,d="",e="",f="",g="",h="",i="";if(b.length>0){var j=module.form.taxonomyCheckbox();if(void 0==j||"undefined"==typeof j||null==j||""==j)return!1;c=j.length,d=$(this).parent().find(".taxonomy-list").attr("data-type")}else{g=$(this).parent().find(".custom-url").val();var k=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;if(!(g.length>0&&k.test(g)))return!1;i='<div class="form-group"><label class="sr-only">Đường dẫn</label><input type="text" placeholder="http://" class="form-control" data-type="url" value="'+g+'" /></div>',h=$(this).parent().find(".custom-name").val(),c=1}var l=$(".menu-sortable").html();if(c>0)for(var m=0;m<c;m++){b.length>0&&(h=b.find("li[data-id="+j[m]+"]").attr("data-text"),f=j[m],g=d+"-"+f);var n=module.php.mt_rand(1,99999999);l.indexOf(n)>0&&(n=module.php.mt_rand(1,99999999)),void 0!==h&&"undefined"!=typeof h&&null!==h&&""!==h&&(e+='<li id="menu-item-'+n+'" data-url="'+g+'" data-title="'+h+'" class="menu-item-edit-inactive"><div class="menu-item-bar"><div class="menu-item-handle"><span class="item-title"><span data-id="'+n+'" class="menu-item-title">'+h+'</span></span><span class="item-controls"><span data-id="'+n+'" class="item-edit font-icon icon-arrow-up"></span></span><div id="menu-item-settings-'+n+'" class="menu-item-settings" style="display: none;"><div class="form-group"><label class="sr-only">Tên đường dẫn</label><input type="text" placeholder="Tên đường dẫn" class="form-control" data-type="title" value="'+h+'" /></div>'+i+'<div class="settings-action"><span class="item-delete" data-id="'+n+'"><span class="dashicons dashicons-trash"></span>Xóa mục</span></div></div></div></div></li>')}$(".navigation-widget input:checkbox").removeAttr("checked"),$(".navigation-widget input:text").val(""),$(".menu-sortable").append(e)}),$(".menu-sortable").on("click",".form-control",function(a){$(this).keyup(function(){var a=$(this).attr("data-type"),b=$(this).val();"url"==a?$(this).parents("li.menu-item-edit-active").attr("data-url",b):"title"==a&&$(this).parents("li.menu-item-edit-active").attr("data-title",b)})})},navigation_ListAction:function(){$("#menu-action-btn").on("click",function(a){a.preventDefault();var b={type:"action"},c=$(this).parents("form").attr("action");module.general.ListAction("list",b,c)})},navigation_ListSearch:function(){$("#menu-search-btn").on("click",function(a){a.preventDefault();var b={type:"search"},c=$(this).parents("form").attr("action");module.general.ListSearch(b,c)})},navigation_Submit:function(){function a(b){for(var c=[],d=b.find("> li"),e=0;e<d.length;e++)c[e]={},c[e].url=$(d[e]).attr("data-url"),c[e].title=$(d[e]).attr("data-title"),$(d[e]).find("> ol").length>0&&(c[e].sub_menu=a($(d[e]).find("> ol")));return c}$("#navigation-submit-btn").on("click",function(b){b.preventDefault();var c=$("#menu-title").val();if(void 0==c||"undefined"==typeof c||null==c||""==c)return!1;var d=$("#menu-slug").val();void 0!=d&&"undefined"!=typeof d&&null!=d&&""!=d||(d="");var e=$(".menu-sortable"),f=a(e),g=$("#select_index").val(),h=$(this).parents("form").attr("action"),i={_token:$("#page_token").val(),title:c,menu:g,slug:d,menu_data:module.php.json_encode(f)},j=module.form.Ajax(i,h);return"undefined"!=typeof j&&void j.success(function(a){module.form.responseMessage(a)}).complete(function(){}).error(function(){module.form.Alert("error")})})},init:function(){module.Website.navigation_Setup(),module.Website.navigation_Add(),module.Website.navigation_Submit()}},$(document).ready(function(){module.Website.init()});var Setting={};Setting.Shipping={},Setting.Setting={StopSessionAll:function(a){swal({title:"Bạn có chắc chắn?",text:"Bạn có chắc chắn muốn yêu cầu tất cả người dùng đăng nhập lại",type:"info",showCancelButton:!0,animation:"none",cancelButtonText:"Hủy",confirmButtonText:"Đồng ý",closeOnConfirm:!1,showLoaderOnConfirm:!0},function(){var b=a.parents("form").serializeObject(),c=a.parents("form").attr("action");$http.post(c,b).success(function(a){setTimeout(function(){swal.close(),location.reload()},1e3)})})}},module.Post={RemoveImage:function(a){$("#post-image-thumbnail").hide(),$("#post-image-thumbnail .image-src").empty(),$('#post-image-thumbnail input[name="post_image_url"]').val(""),$('#post-image-thumbnail input[name="post_image_id"]').val(""),$("#post-image-modal").show()},AddCategory:function(){var a={_token:$("#page_token").val(),submit_type:"quick_create",name:$(".new-category").val(),parent:$(".new-category-parent").val()};$http.post("admin/taxonomy/post-category/create",a).success(function(a){if($validator.isResponse(a)){var b=$php.json_decode(a);if("True"==b.Response){if($("ul.taxonomy-checklist")[0]){var c=new Array;$("ul.taxonomy-checklist li").each(function(a,b){c.push($(this).attr("data-order"))});var d=c.sort(function(a,b){return b-a});$("ul.taxonomy-checklist").prepend('<li data-id="'+b.taxonomy_id+'" data-text="'+b.taxonomy_name+'" data-order="'+d[0]+'"><input id="cat-'+b.taxonomy_id+'" class="filled-in" type="checkbox" name="post_category['+d[0]+']" value="'+b.taxonomy_id+'" /><label for="cat-'+b.taxonomy_id+'">'+b.taxonomy_name+"</label></li>")}$(".new-category").val(""),$(".new-category-parent").val("0")}}})},TableSearch:function(a){var b=module.Form.getUrlVars().user_id;void 0!=b&&"undefined"!=typeof b||(b=0);var c={user_id:b,post_status:$("#action_status").val()},d=a.parents("form").attr("action");module.Table.Search(c,d)},Submit:function(a){var b=a.parents("form").serializeObject(),c=a.parents("form").attr("action");$http.post(c,b).success(function(a){})}};